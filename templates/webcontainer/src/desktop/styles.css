/* Base variables and layout */
:root{--bar:#f6f6f6;--text:#f7fafc;--muted:#cbd5e1;--bg:#0b1020;--glass:rgba(255,255,255,0.25);--dock:rgba(255,255,255,0.3);
  /* Desktop gradient themes */
  --desktop-gradient-1: linear-gradient(180deg, #0b1020 0%, #1e2760 60%, #462e7e 100%);
  --desktop-gradient-2: linear-gradient(180deg, #0f172a 0%, #1e293b 50%, #0b1020 100%);
  --desktop-gradient-3: linear-gradient(180deg, #0b1020 0%, #0b3a23 60%, #04210f 100%);
  --desktop-gradient-4: linear-gradient(180deg, #12081f 0%, #3a103a 60%, #7a1a4a 100%);
  --desktop-gradient-5: linear-gradient(180deg, #0b1020 0%, #0e223f 45%, #0f1b2e 100%);
  --desktop-gradient: var(--desktop-gradient-1);
}
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap');
*{box-sizing:border-box}
body{font-family:Inter,ui-sans-serif,system-ui,Arial}
.desktop{height:100%;width:100%;position:relative;color:#f7fafc;overflow:hidden;overscroll-behavior:none}
.wallpaper{position:absolute;inset:0;background:var(--desktop-gradient)}
.wallpaper-glass{position:absolute;inset:0;pointer-events:none;background:rgba(255,255,255,0.02);backdrop-filter:saturate(160%) blur(24px);-webkit-backdrop-filter:saturate(160%) blur(24px)}
.menubar{position:absolute;left:0;right:0;top:0;height:28px;display:flex;align-items:center;gap:12px;padding:0 12px;background:linear-gradient(to bottom,rgba(255,255,255,.65),rgba(255,255,255,.3));backdrop-filter:saturate(2) blur(10px);border-bottom:1px solid rgba(255,255,255,.35)}
.menubar .title{font-weight:600;font-size:12px}
.menubar .right{margin-left:auto;font-size:12px;color:var(--muted)}

/* Dock removed */

/* Desktop icons (absolute + draggable) */
.desktop-icons{position:absolute;inset:0}
.desktop-icon{position:absolute;width:64px;text-align:center;color:white;cursor:default;user-select:none;transition:transform .15s ease, filter .2s ease;will-change:transform,filter}
.desktop-icon:hover{transform:translateY(-6px) scale(1.1);filter:drop-shadow(0 8px 12px rgba(0,0,0,.35))}
.desktop-icon.launching{animation:icon-bounce .6s cubic-bezier(.28,.84,.42,1)}
.desktop-icon .glyph{transition:inherit}

@keyframes icon-bounce{
  0%{transform:translateY(0) scale(1)}
  30%{transform:translateY(-8px) scale(1.08)}
  60%{transform:translateY(0) scale(1)}
  85%{transform:translateY(-4px) scale(1.04)}
  100%{transform:translateY(0) scale(1)}
}
.desktop-icon .glyph{font-size:36px;line-height:36px}

/* Window */
.window{position:absolute;top:90px;left:90px;min-width:280px;min-height:160px;border-radius:0;overflow:hidden;contain:layout paint;backface-visibility:hidden;
  /* Thin luminous frame using gradient border technique */
  border:1px solid transparent;
  background:
    linear-gradient(to bottom, rgba(255,255,255,0.08), rgba(255,255,255,0.02)) padding-box,
    linear-gradient(to bottom, rgba(255,255,255,0.20), rgba(56,189,248,0.28)) border-box;
  /* Glass surface */
  -webkit-backdrop-filter:saturate(180%) blur(18px);
  backdrop-filter:saturate(180%) blur(18px);
  /* Subtle outer drop */
  box-shadow:0 14px 36px rgba(0,0,0,.28);
  /* Keep surface slightly translucent but not overly dark */
  color:#e5e7eb;
}
.window.opening{animation:mac-window-open-spring .34s cubic-bezier(.2,.8,.2,1)}
.window.closing{animation:mac-window-close .22s cubic-bezier(.2,.8,.2,1) forwards}
.window.minimizing{animation:mac-window-minimize .22s cubic-bezier(.2,.8,.2,1) forwards}
.window.minimized{opacity:0;transform:translateY(8px) scale(.92);pointer-events:none;visibility:hidden}
.window .titlebar{display:none}
.traffic{display:flex;gap:6px;margin-right:6px}
.traffic .b{width:12px;height:12px;border-radius:999px;border:1px solid rgba(56,189,248,.65)}
.b.red{background:#ef4444;border-color:#fca5a5}
.b.yellow{background:#f59e0b;border-color:#fcd34d}
.b.green{background:#22c55e;border-color:#86efac}
.window .title{font-weight:600;font-size:12px;color:#e5e7eb}
.window .content{position:absolute;top:32px;left:0;right:0;bottom:0;padding:0;font-size:14px;color:#e5e7eb;overflow:hidden;user-select:text;-webkit-user-select:text;background:rgba(12,18,36,0.02)}

@keyframes mac-window-open-spring{
  0%{opacity:0;transform:translateY(10px) scale(.92)}
  55%{opacity:1;transform:translateY(0) scale(1.04)}
  100%{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes mac-window-close{
  0%{opacity:1;transform:translateY(0) scale(1)}
  100%{opacity:0;transform:translateY(6px) scale(.98)}
}
@keyframes mac-window-minimize{
  0%{opacity:1;transform:translateY(0) scale(1)}
  100%{opacity:0;transform:translateY(12px) scale(.85)}
}

/* Resize handles (corners) */
.resize-handle{position:absolute;width:12px;height:12px;background:transparent;user-select:none;-webkit-user-select:none;touch-action:none}
.resize-handle.nw{left:-1px;top:-1px;cursor:nwse-resize}
.resize-handle.ne{right:-1px;top:-1px;cursor:nesw-resize}
.resize-handle.sw{left:-1px;bottom:-1px;cursor:nesw-resize}
.resize-handle.se{right:-1px;bottom:-1px;cursor:nwse-resize}

/* While any window is resizing/moving, disable selection globally and hint compositing */
.desktop-resizing, .desktop-resizing *{user-select:none;-webkit-user-select:none}
.window.resizing{will-change:width,height,transform;box-shadow:0 8px 18px rgba(0,0,0,.18);outline:2px solid rgba(56,189,248,.65)}
.desktop-resizing .content iframe{pointer-events:none}


/* Tabstrip */
/* Tabstrip */
.tabstrip{position:relative; display:flex; align-items:center; gap:6px; height:32px; padding:0 8px; border-bottom:1px solid rgba(255,255,255,.12); background:linear-gradient(to bottom, rgba(255,255,255,.10), rgba(255,255,255,.02)); overflow:hidden; cursor:move; user-select:none; -webkit-user-select:none}
.tab{display:inline-flex; align-items:center; gap:6px; height:24px; padding:0 8px; border:1px solid transparent; border-radius:6px; background:transparent; color:#e5e7eb; cursor:default; user-select:none}
.tab.active{background:rgba(255,255,255,0.10); border-color:rgba(255,255,255,0.18)}
.tab:hover{background:rgba(255,255,255,0.06)}
.tab-ico{font-size:12px}
.tab-close{margin-left:6px; opacity:.6; cursor:pointer}
.tab-close:hover{opacity:1}
.tab-add{margin-left:auto; height:22px; width:22px; border-radius:4px; background:rgba(255,255,255,0.10); border:1px solid rgba(255,255,255,0.18); color:#e5e7eb; line-height:20px; text-align:center}
.tab-gradient-left,.tab-gradient-right{position:absolute; top:0; bottom:0; width:24px; pointer-events:none}
.tab-gradient-left{left:0; background:linear-gradient(to right, rgba(255,255,255,0.14), rgba(255,255,255,0))}
.tab-gradient-right{right:0; background:linear-gradient(to left, rgba(255,255,255,0.14), rgba(255,255,255,0))}
.tab-insert-marker{position:absolute; bottom:3px; width:2px; height:18px; background:#38bdf8; border-radius:1px; display:none}

/* Window glass controls (no traffic lights) */
.win-controls{display:flex; gap:6px; margin-left:8px}
.ctl{width:14px; height:14px; border:1px solid rgba(255,255,255,0.22); border-radius:3px; background:linear-gradient(to bottom, rgba(255,255,255,0.12), rgba(255,255,255,0.02)); box-shadow:inset 0 1px 0 rgba(255,255,255,0.22), 0 1px 1px rgba(0,0,0,0.22)}
.ctl:hover{background:linear-gradient(to bottom, rgba(255,255,255,0.18), rgba(255,255,255,0.06))}
.ctl-close{outline:0}
.ctl-min{outline:0}
.ctl-expand{outline:0}

/* Launcher Grid */
.launcher-grid{display:grid; grid-template-columns:repeat(auto-fill, minmax(120px,1fr)); gap:12px; padding:12px}
.launcher-item{display:flex; flex-direction:column; align-items:center; gap:8px; padding:12px; border:1px solid rgba(255,255,255,0.14); border-radius:10px; background:rgba(12,18,36,0.45); backdrop-filter:saturate(150%) blur(8px); -webkit-backdrop-filter:saturate(150%) blur(8px); color:#f7fafc}
.launcher-item .glyph{font-size:24px}

/* Misc */
.badge{font-size:11px;color:#e5e7eb;background:rgba(12,18,36,0.55);border:1px solid rgba(255,255,255,0.18);border-radius:999px;padding:2px 8px}
.muted{color:#6b7280}
.list{padding-left:16px}

/* HMR mask to suppress white flashes during full reloads/HMR swaps */
.hmr-mask{position:fixed;inset:0;background:#0b1020;opacity:0;pointer-events:none;transition:opacity .12s ease;z-index:2147483646}
.hmr-mask.active{opacity:.9}

/* Sidebar */
.desktop-sidebar{background:rgba(12,18,36,0.42);border-right:1px solid rgba(255,255,255,0.14);backdrop-filter:saturate(150%) blur(14px);-webkit-backdrop-filter:saturate(150%) blur(14px);color:#f7fafc}
.desktop-sidebar .sidebar-item:hover{background:rgba(255,255,255,0.08)}
.desktop-sidebar .sidebar-item.active{background:rgba(255,255,255,0.12)}

/* Boot screen */
.bootscreen{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);z-index:2147483000}
.boot-panel{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:14px;width:min(840px,90vw);padding:16px;border:1px solid rgba(255,255,255,0.14);border-radius:12px;background:rgba(12,18,36,0.55);backdrop-filter:saturate(150%) blur(18px);-webkit-backdrop-filter:saturate(150%) blur(18px);color:#f7fafc}
.boot-title{grid-column:1/-1;font-weight:600;margin-bottom:4px}
.boot-card{height:96px;border-radius:10px;border:1px solid rgba(255,255,255,0.18);overflow:hidden;cursor:pointer;box-shadow:0 10px 28px rgba(0,0,0,.28)}
.boot-card:focus,.boot-card:hover{outline:2px solid rgba(56,189,248,0.65);outline-offset:0}

/* Center brand & app row */
.center-brand{position:absolute;left:50%;top:calc(50% - 56px);transform:translate(-50%,-50%);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;z-index:30;pointer-events:none}
.brand-text{font-family:'Playfair Display', serif;font-weight:600;font-size:56px;line-height:1;color:#f7fafc;text-shadow:0 2px 8px rgba(0,0,0,0.35)}
.app-row{display:flex;gap:12px;margin-top:14px;pointer-events:auto}
.app-chip{display:flex;flex-direction:column;align-items:center;justify-content:center;width:96px;height:96px;border:1px solid rgba(255,255,255,0.16);border-radius:12px;background:rgba(12,18,36,0.45);backdrop-filter:saturate(150%) blur(10px);-webkit-backdrop-filter:saturate(150%) blur(10px);color:#f7fafc;cursor:pointer;transition:transform .12s ease, box-shadow .12s ease, background .12s ease}
.app-chip:hover{transform:translateY(-2px);box-shadow:0 10px 28px rgba(0,0,0,0.28);background:rgba(12,18,36,0.6)}
.app-chip .ico{font-size:24px;line-height:1}
.app-chip .lbl{margin-top:6px;font-size:12px;white-space:nowrap;max-width:84px;overflow:hidden;text-overflow:ellipsis}
