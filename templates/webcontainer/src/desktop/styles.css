/* Base variables and layout */
:root{--bar:#f6f6f6;--text:#111;--muted:#6b7280;--bg:#0b1020;--glass:rgba(255,255,255,0.25);--dock:rgba(255,255,255,0.3);}
*{box-sizing:border-box}
body{font-family:Inter,ui-sans-serif,system-ui,Arial}
.desktop{height:100%;width:100%;position:relative;color:#111;overflow:hidden;overscroll-behavior:none}
.wallpaper{position:absolute;inset:0;background:linear-gradient(135deg,#0b1020 0%,#1e2760 60%,#462e7e 100%)}
.menubar{position:absolute;left:0;right:0;top:0;height:28px;display:flex;align-items:center;gap:12px;padding:0 12px;background:linear-gradient(to bottom,rgba(255,255,255,.65),rgba(255,255,255,.3));backdrop-filter:saturate(2) blur(10px);border-bottom:1px solid rgba(255,255,255,.35)}
.menubar .title{font-weight:600;font-size:12px}
.menubar .right{margin-left:auto;font-size:12px;color:var(--muted)}

/* Dock removed */

/* Desktop icons (absolute + draggable) */
.desktop-icons{position:absolute;inset:0}
.desktop-icon{position:absolute;width:64px;text-align:center;color:white;cursor:default;user-select:none;transition:transform .15s ease, filter .2s ease;will-change:transform,filter}
.desktop-icon:hover{transform:translateY(-6px) scale(1.1);filter:drop-shadow(0 8px 12px rgba(0,0,0,.35))}
.desktop-icon.launching{animation:icon-bounce .6s cubic-bezier(.28,.84,.42,1)}
.desktop-icon .glyph{transition:inherit}

@keyframes icon-bounce{
  0%{transform:translateY(0) scale(1)}
  30%{transform:translateY(-8px) scale(1.08)}
  60%{transform:translateY(0) scale(1)}
  85%{transform:translateY(-4px) scale(1.04)}
  100%{transform:translateY(0) scale(1)}
}
.desktop-icon .glyph{font-size:36px;line-height:36px}

/* Window */
.window{position:absolute;top:90px;left:90px;min-width:280px;min-height:160px;background:white;border-radius:0;box-shadow:0 18px 44px rgba(0,0,0,.25);overflow:hidden;border:0;outline:4px solid rgba(56,189,248,.95);outline-offset:0;will-change:transform,width,height,opacity;backface-visibility:hidden;transform:translateZ(0);contain:layout paint}
.window.opening{animation:mac-window-open-spring .34s cubic-bezier(.2,.8,.2,1)}
.window.closing{animation:mac-window-close .22s cubic-bezier(.2,.8,.2,1) forwards}
.window.minimizing{animation:mac-window-minimize .22s cubic-bezier(.2,.8,.2,1) forwards}
.window.minimized{opacity:0;transform:translateY(8px) scale(.92);pointer-events:none;visibility:hidden}
.window .titlebar{height:32px;display:flex;align-items:center;gap:8px;padding:0 10px;background:linear-gradient(to bottom,rgba(255,255,255,.9),rgba(255,255,255,.7));border-bottom:1px solid rgba(0,0,0,.08);cursor:move;user-select:none;-webkit-user-select:none;touch-action:none;-webkit-app-region:no-drag}
.traffic{display:flex;gap:6px;margin-right:6px}
.traffic .b{width:12px;height:12px;border-radius:0;border:1px solid rgba(56,189,248,.9)}
.b.red{background:#ef4444;border-color:#fca5a5}
.b.yellow{background:#f59e0b;border-color:#fcd34d}
.b.green{background:#22c55e;border-color:#86efac}
.window .title{font-weight:600;font-size:12px;color:#0b1020}
.window .content{position:absolute;top:32px;left:0;right:0;bottom:0;padding:0;font-size:14px;color:#111827;overflow:hidden;user-select:text;-webkit-user-select:text}

@keyframes mac-window-open-spring{
  0%{opacity:0;transform:translateY(10px) scale(.92)}
  55%{opacity:1;transform:translateY(0) scale(1.04)}
  100%{opacity:1;transform:translateY(0) scale(1)}
}
@keyframes mac-window-close{
  0%{opacity:1;transform:translateY(0) scale(1)}
  100%{opacity:0;transform:translateY(6px) scale(.98)}
}
@keyframes mac-window-minimize{
  0%{opacity:1;transform:translateY(0) scale(1)}
  100%{opacity:0;transform:translateY(12px) scale(.85)}
}

/* Resize handles (corners) */
.resize-handle{position:absolute;width:12px;height:12px;background:transparent;user-select:none;-webkit-user-select:none;touch-action:none}
.resize-handle.nw{left:-1px;top:-1px;cursor:nwse-resize}
.resize-handle.ne{right:-1px;top:-1px;cursor:nesw-resize}
.resize-handle.sw{left:-1px;bottom:-1px;cursor:nesw-resize}
.resize-handle.se{right:-1px;bottom:-1px;cursor:nwse-resize}

/* While any window is resizing/moving, disable selection globally and hint compositing */
.desktop-resizing, .desktop-resizing *{user-select:none;-webkit-user-select:none}
.window.resizing{will-change:width,height,transform;box-shadow:0 8px 18px rgba(0,0,0,.18);outline:2px solid rgba(56,189,248,.65)}
.desktop-resizing .content iframe{pointer-events:none}

/* Snap overlay */
.snap-overlay{position:absolute;inset:0;pointer-events:none}
.snap-preview{position:absolute;border:2px dashed rgba(56,189,248,.85);background:rgba(56,189,248,.08);border-radius:6px;box-shadow:0 8px 32px rgba(0,0,0,.25);opacity:.001;transform:scale(.98);transition:opacity .14s ease, transform .14s ease}
.snap-preview.active{opacity:1;transform:scale(1)}

/* Tabstrip */
.tabstrip{position:relative; display:flex; align-items:center; gap:6px; height:32px; padding:0 8px; border-bottom:1px solid rgba(0,0,0,.06); background:linear-gradient(to bottom, rgba(255,255,255,.85), rgba(255,255,255,.7)); overflow:hidden}
.tab{display:inline-flex; align-items:center; gap:6px; height:24px; padding:0 8px; border:1px solid transparent; border-radius:6px; background:transparent; color:#111; cursor:default; user-select:none}
.tab.active{background:#f3f4f6; border-color:#e5e7eb}
.tab:hover{background:#f8fafc}
.tab-ico{font-size:12px}
.tab-close{margin-left:6px; opacity:.6; cursor:pointer}
.tab-close:hover{opacity:1}
.tab-add{margin-left:auto; height:22px; width:22px; border-radius:999px; background:#f3f4f6; border:1px solid #e5e7eb; line-height:20px; text-align:center}
.tab-gradient-left,.tab-gradient-right{position:absolute; top:0; bottom:0; width:24px; pointer-events:none}
.tab-gradient-left{left:0; background:linear-gradient(to right, rgba(255,255,255,1), rgba(255,255,255,0))}
.tab-gradient-right{right:0; background:linear-gradient(to left, rgba(255,255,255,1), rgba(255,255,255,0))}
.tab-insert-marker{position:absolute; bottom:3px; width:2px; height:18px; background:#38bdf8; border-radius:1px; display:none}

/* Launcher Grid */
.launcher-grid{display:grid; grid-template-columns:repeat(auto-fill, minmax(120px,1fr)); gap:12px; padding:12px}
.launcher-item{display:flex; flex-direction:column; align-items:center; gap:8px; padding:12px; border:1px solid #e5e7eb; border-radius:10px; background:#fff}
.launcher-item .glyph{font-size:24px}

/* Misc */
.badge{font-size:11px;color:#374151;background:#eef2ff;border:1px solid #c7d2fe;border-radius:999px;padding:2px 8px}
.muted{color:#6b7280}
.list{padding-left:16px}

/* HMR mask to suppress white flashes during full reloads/HMR swaps */
.hmr-mask{position:fixed;inset:0;background:#0b1020;opacity:0;pointer-events:none;transition:opacity .12s ease;z-index:2147483646}
.hmr-mask.active{opacity:.9}
